@model TCS.WebUI.Models.DesignDraw
@using System.Globalization


@{

    int? x = ViewBag.delete;
    Matriz matriz = ViewBag.matriz;
    MatrizSley matrizSley = ViewBag.matrizSley;
    MatrizSley2 matrizSley2 = ViewBag.matrizSley2;
    int r = matriz.Filas.Count();


}
@*<div class="col-12">
    <table id="design-table">

        @for (int i = 0; i < matriz.Cols + 1; i++)
        {

            @if (matriz.Cols > 0)
            {

                if (i == 0)
                {
                    <td style="width:25px"></td>

                }
                else
                {
                    <td style="width:25px">@i</td>

                }

            }
        }
        @foreach (var item in matriz.Filas)
        {
            <tr style="height:25px">

                @{
                    <td>@r</td>
                    r = r - 1;
                }

                @foreach(var item2 in item.Columnas)
                {
 
                    if (item2.Dato == "SieKipo")
                    {

                        <td  style="width:25px;background-color:#0000ff;" onClick="toggleColor(this);"></td>
                    }
                            
                    else
                    {
                        <td style="width:25px"></td>
                    }

                }

            </tr>
        }

        
    </table>
</div>*@

@*<div class="col-12">
    <table id="design-table">

        @for (int i = 0; i < matrizSley2.ColumnaSleys2.Count() + 1; i++)
        {

            @if (matrizSley2.ColumnaSleys2.Count() > 0)
            {

                if (i == 0)
                {
                    <td style="width:25px"></td>

                }
                else
                {
                    <td style="width:25px">@i</td>

                }

            }
        }
        @foreach (var item in matrizSley2.ColumnaSleys2)
        {
            <tr style="height:25px">

                @{
                    <td>@f</td>
                    f = f - 1;
                }

                @foreach (var item2 in item.filaSleys2)
                {

                    if (item2.Dato == "SieKipo")
                    {

                        <td style="width:25px;background-color:#0000ff;" onClick="toggleColor(this);"></td>
                    }

                    else
                    {
                        <td style="width:25px"></td>
                    }

                }

            </tr>
        }


    </table>
</div>*@

    <div class="div-container">
        <table id="design-table">
            @for (int i = 0; i < matrizSley2.ColumnaSleys2.Count() + 1; i++)
            {

                @if (matrizSley2.ColumnaSleys2.Count() > 0)
                {

                    if (i == 0)
                    {
                        <td class="cube-size"></td>

                    }
                    else
                    {
                        <td class="cube-size">@i</td>

                    }

                }
            }
            @for (int i = 0; i < matriz.Filas.Count; i++)
            {
                <tr class="cube-size">

                    @{
                        <td>@r</td>
                        r = r - 1;
                    }

                    @foreach (var item2 in matrizSley2.ColumnaSleys2)
                    {
                        foreach (var item in item2.filaSleys2)
                        {
                            if (item.fila == i + 1)
                            {
                                if (item.Dato == "SieKipo")
                                {

                                    <td class="cube-size" style="background-color:#0000ff;" onClick="toggleColor(this);"></td>
                                }
                                else
                                {
                                    <td class="cube-size"></td>
                                }
                            }

                        }

                    }

                </tr>
            }


        </table>

        <br />
        <br />
        <br />
        @{
            int v = matriz.Filas.Count(); }

        <table id="design-table2">

            @for (int i = 0; i < matriz.Cols + 1; i++)
            {
                @if (matriz.Cols > 0)
                {
                    if (i == 0)
                    {
                        <td class="cube-size"></td>
                    }
                    else
                    {
                        <td class="cube-size">@i</td>
                    }
                }
            }
            @foreach (var item in matriz.Filas)
            {
                <tr class="cube-size">

                    @{
                        <td>@v</td>
                        v = v - 1;
                    }

                    @foreach (var item2 in item.Columnas)
                    {
                        if (item2.Dato == "SieKipo")
                        {
                            <td class="cube-size" style="background-color:#0000ff;" onClick="toggleColor(this);"></td>
                        }
                        else
                        {
                            <td class="cube-size"></td>
                        }
                    }
                </tr>
            }
        </table>

        @{
            int l = matrizSley.Rows;
        }
        <br />
        <br />
        <br />
        <table id="design-table3">
            @for (int i = 0; i < matrizSley.ColumnaSleys.Count() + 1; i++)
            {

                @if (matrizSley.ColumnaSleys.Count() > 0)
                {

                    if (i == 0)
                    {
                        <td class="cube-size"></td>

                    }
                    else
                    {
                        <td class="cube-size">@i</td>

                    }

                }
            }
            @for (int i = 0; i < matrizSley.Rows; i++)
            {
                <tr class="cube-size">

                    @{
                        <td>@l</td>
                        l = l - 1;
                    }

                    @foreach (var item2 in matrizSley.ColumnaSleys)
                    {
                        foreach (var item in item2.filaSleys)
                        {
                            if (item.fila == i + 1)
                            {
                                if (item.Dato == "SieKipo")
                                {

                                    <td class="cube-size" style="background-color:#0000ff;" onClick="toggleColor(this);"></td>
                                }
                                else
                                {
                                    <td class="cube-size"></td>
                                }
                            }

                        }

                    }

                </tr>
            }
        </table>
    </div>

@*<div class="col-12">
    <table id="design-table">

        @for (int i = 0; i < matrizSley.Cols + 1; i++)
        {

            @if (matrizSley.Cols > 0)
            {

                if (i == 0)
                {
                    <td style="width:25px"></td>

                }
                else
                {
                    <td style="width:25px">@i</td>

                }

            }
        }
        @foreach (var item in matrizSley.ColumnaSleys)
        {
            <tr style="height:25px">

                @{
                    <td>@r</td>
                    r = r - 1;
                }

                @foreach (var item2 in item.filaSleys)
                {

                    if (item2.Dato == "SieKipo")
                    {

                        <td style="width:25px;background-color:#0000ff;" onClick="toggleColor(this);"></td>
                    }

                    else
                    {
                        <td style="width:25px"></td>
                    }

                }

            </tr>
        }


    </table>
</div>*@

@*<div class="col-12">
    <table id="design-table">

        @for (int i = 0; i < matrizSley.ColumnaSleys.Count() + 1; i++)
        {

            @if (matrizSley.ColumnaSleys.Count() > 0)
            {

                if (i == 0)
                {
                    <td style="width:25px"></td>

                }
                else
                {
                    <td style="width:25px">@i</td>

                }

            }
        }
        @for (int i = 0; i < matrizSley.Rows + 1; i++)
        {
    <tr style="height:25px">
        @{
            <td>@o</td>
            o = o - 1;
        }
        @foreach (var item in matrizSley.ColumnaSleys)
        {
            foreach (var item2 in item.filaSleys)
            {

                if (item2.Dato == "SieKipo")
                {
                    @foreach (var item3 in matriz.Filas)
                    {

                        @foreach (var item4 in item3.Columnas)
                        {
                            if (item4.col == item.col)
                            {
                                if (item4.Dato == "SieKipo")
                                {

                                    <td style="width:25px;background-color:#0000ff;" onClick="toggleColor(this);"></td>
                                }

                                else
                                {
                                    <td style="width:25px"></td>
                                }

                            }

                        }
                    }
                }
            }
          
        }


    </tr>
            }





    </table>
</div>*@





<style>
    .div-container {
        padding: 0px;
        box-sizing: border-box;
    }

    table, th, td {
        padding-right: 0.2em;
        border: 1px solid black;
        border-collapse: collapse;
    }

        td:hover {
            background-color: rgb(250,250,250);
        }

    .cube-size {
        width: 29px;
        min-width: 29px;
        height: 29px;
        font-size: 1.12em;
        text-align: end;
        padding-right: 0.1em;
    }

    .reps-width {
        background-color: #FF0000;
        color: white;
        padding: 0px;
        font-size: 16px;
        text-align: center;
    }
</style>
<script type="text/javascript">
    
    function toggleColor(obj) {
        var bgColor = obj.style.backgroundColor;
        if (bgColor == "rgb(0, 0, 255)") {
            obj.style.backgroundColor = "";
        }
        else {
            obj.style.backgroundColor = "#0000ff";
        }
        $("#DraftPlan").val(getData())
        
        console.log(getData());
    };
    function getData() {
        var table = document.getElementById("design-table");
        var data = '';
        for (var i = 0, row; row = table.rows[i]; i++) {
            for (var j = 0, col; col = row.cells[j]; j++) {
                var bgColor = col.style.backgroundColor;
                if (bgColor == "rgb(0, 0, 255)") {
                    data = data + col.getAttribute("name") + "|";
                }
            }
        }
        console.log(data.slice(0, -1));

        return data.slice(0, -1);
    };
</script>